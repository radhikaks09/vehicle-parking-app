{% extends "dashboard.html" %}

{% block main_dashboard %}
    <div class="card">
        <h2>Welcome, {{ name }}!</h2>
        <p>This is your {{ role }} dashboard.</p>
    </div>
    <h2>All Parking Lots</h2>

    <div style="margin-bottom: 20px;">
        <a href="{{ url_for('admin.add_lot') }}">
            <button>Add New Parking Lot</button>
        </a>
    </div>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Location</th>
                <th>Pincode</th>
                <th>Total Spots</th>
                <th>Price/Hour</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for lot in parking_lots %}
                <tr>
                    <td>{{ lot.id }}</td>
                    <td>{{ lot.name }}</td>
                    <td>{{ lot.location }}</td>
                    <td>{{ lot.pincode }}</td>
                    <td>{{ lot.total_spots }}</td>
                    <td>{{ lot.price_per_hour }}</td>
                    <td>
                        <div class="action-buttons">
                            <a href="{{ url_for('admin.edit_lot', lot_id=lot.id) }}"><button>Edit</button></a>
                            <form action="{{ url_for('admin.delete_lot', lot_id=lot.id) }}" method="POST"><button>Delete</button></form>
                            <a href="{{ url_for('admin.view_spots', lot_id=lot.id) }}"><button>View Spots</button></a>
                        </div>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
